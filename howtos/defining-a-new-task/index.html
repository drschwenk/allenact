



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A framework for Embodied AI research">
      
      
        <link rel="canonical" href="https://github.com/allenai/allenact/howtos/defining-a-new-task/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/PriorLogo_CircleOnly_Blue.svg">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.0">
    
    
      
        <title>Define a new task - AllenAct</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-120916510-8", "allenai.github.io/allenact")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="grey">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#defining-a-new-task" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/allenai/allenact" title="AllenAct" class="md-header-nav__button md-logo">
          
            <img src="../../img/PriorLogo_CircleOnly.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              AllenAct
            </span>
            <span class="md-header-nav__topic">
              Define a new task
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/allenai/allenact/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    allenai/allenact
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/allenai/allenact" title="AllenAct" class="md-nav__button md-logo">
      
        <img src="../../img/PriorLogo_CircleOnly.svg" width="48" height="48">
      
    </a>
    AllenAct
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/allenai/allenact/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    allenai/allenact
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/installation-allenact/" title="Installation of AllenAct" class="md-nav__link">
      Installation of AllenAct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/installation-framework/" title="Installation of supported frameworks" class="md-nav__link">
      Installation of supported frameworks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/running-your-first-experiment/" title="Run your first experiment" class="md-nav__link">
      Run your first experiment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/structure/" title="Structure of the codebase" class="md-nav__link">
      Structure of the codebase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/abstractions/" title="Primary abstractions" class="md-nav__link">
      Primary abstractions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/" title="AllenAct Tutorials" class="md-nav__link">
      AllenAct Tutorials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/minigrid-tutorial/" title="Navigation in Minigrid" class="md-nav__link">
      Navigation in Minigrid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/training-a-pointnav-model/" title="PointNav in RoboTHOR" class="md-nav__link">
      PointNav in RoboTHOR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/transfering-to-a-different-environment-framework/" title="Swapping environments" class="md-nav__link">
      Swapping environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/running_inference_on_a_pretrained_model/" title="Using a pre-trained model" class="md-nav__link">
      Using a pre-trained model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/training-pipelines/" title="IL to RL with pipelines" class="md-nav__link">
      IL to RL with pipelines
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      HowTos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        HowTos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../defining-an-experiment/" title="Define an experiment" class="md-nav__link">
      Define an experiment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changing-rewards-and-losses/" title="Change rewards and losses" class="md-nav__link">
      Change rewards and losses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../defining-a-new-model/" title="Define a new model" class="md-nav__link">
      Define a new model
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Define a new task
      </label>
    
    <a href="./" title="Define a new task" class="md-nav__link md-nav__link--active">
      Define a new task
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#task" title="Task" class="md-nav__link">
    Task
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization-action-space-and-termination" title="Initialization, action space and termination" class="md-nav__link">
    Initialization, action space and termination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-method" title="Step method" class="md-nav__link">
    Step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-rendering-and-expert-actions" title="Metrics, rendering and expert actions" class="md-nav__link">
    Metrics, rendering and expert actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasksampler" title="TaskSampler" class="md-nav__link">
    TaskSampler
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization-and-termination" title="Initialization and termination" class="md-nav__link">
    Initialization and termination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-sampling" title="Task sampling" class="md-nav__link">
    Task sampling
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../defining-a-new-training-pipeline/" title="Define a new training pipeline" class="md-nav__link">
      Define a new training pipeline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../visualizing-results/" title="Visualize results" class="md-nav__link">
      Visualize results
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running-a-multi-agent-experiment/" title="Run a multi-agent experiment" class="md-nav__link">
      Run a multi-agent experiment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/babyai_baselines/" title="BabyAI baselines" class="md-nav__link">
      BabyAI baselines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/pointnav_baselines/" title="PointNav baselines" class="md-nav__link">
      PointNav baselines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/objectnav_baselines/" title="ObjectNav baselines" class="md-nav__link">
      ObjectNav baselines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/advisor_2020/" title="Advisor code" class="md-nav__link">
      Advisor code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/two_body_problem_2019/" title="Two Body Problem code" class="md-nav__link">
      Two Body Problem code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../LICENSE/" title="Licence" class="md-nav__link">
      Licence
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/constants.md" title="constants" class="md-nav__link">
      constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2" type="checkbox" id="nav-10-2">
    
    <label class="md-nav__link" for="nav-10-2">
      core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-2">
        core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-1" type="checkbox" id="nav-10-2-1">
    
    <label class="md-nav__link" for="nav-10-2-1">
      base_abstractions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-2-1">
        base_abstractions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/experiment_config.md" title="experiment_config" class="md-nav__link">
      experiment_config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/misc.md" title="misc" class="md-nav__link">
      misc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/task.md" title="task" class="md-nav__link">
      task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/sensor.md" title="sensor" class="md-nav__link">
      sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/preprocessor.md" title="preprocessor" class="md-nav__link">
      preprocessor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/base_abstractions/distributions.md" title="distributions" class="md-nav__link">
      distributions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2" type="checkbox" id="nav-10-2-2">
    
    <label class="md-nav__link" for="nav-10-2-2">
      algorithms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-2-2">
        algorithms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-1" type="checkbox" id="nav-10-2-2-1">
    
    <label class="md-nav__link" for="nav-10-2-2-1">
      onpolicy_sync
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-2-2-1">
        onpolicy_sync
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-1-1" type="checkbox" id="nav-10-2-2-1-1">
    
    <label class="md-nav__link" for="nav-10-2-2-1-1">
      losses
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-2-2-1-1">
        losses
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/imitation.md" title="imitation" class="md-nav__link">
      imitation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/abstract_loss.md" title="abstract_loss" class="md-nav__link">
      abstract_loss
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/ppo.md" title="ppo" class="md-nav__link">
      ppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/kfac.md" title="kfac" class="md-nav__link">
      kfac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/losses/a2cacktr.md" title="a2cacktr" class="md-nav__link">
      a2cacktr
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/runner.md" title="runner" class="md-nav__link">
      runner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/light_engine.md" title="light_engine" class="md-nav__link">
      light_engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/policy.md" title="policy" class="md-nav__link">
      policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/vector_sampled_tasks.md" title="vector_sampled_tasks" class="md-nav__link">
      vector_sampled_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/onpolicy_sync/storage.md" title="storage" class="md-nav__link">
      storage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-2" type="checkbox" id="nav-10-2-2-2">
    
    <label class="md-nav__link" for="nav-10-2-2-2">
      offpolicy_sync
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-2-2-2">
        offpolicy_sync
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-2-2-1" type="checkbox" id="nav-10-2-2-2-1">
    
    <label class="md-nav__link" for="nav-10-2-2-2-1">
      losses
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-2-2-2-1">
        losses
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/algorithms/offpolicy_sync/losses/abstract_offpolicy_loss.md" title="abstract_offpolicy_loss" class="md-nav__link">
      abstract_offpolicy_loss
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2-3" type="checkbox" id="nav-10-2-3">
    
    <label class="md-nav__link" for="nav-10-2-3">
      models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-2-3">
        models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/core/models/basic_models.md" title="basic_models" class="md-nav__link">
      basic_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3" type="checkbox" id="nav-10-3">
    
    <label class="md-nav__link" for="nav-10-3">
      plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-3">
        plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-1" type="checkbox" id="nav-10-3-1">
    
    <label class="md-nav__link" for="nav-10-3-1">
      habitat_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-1">
        habitat_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_constants.md" title="habitat_constants" class="md-nav__link">
      habitat_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_tasks.md" title="habitat_tasks" class="md-nav__link">
      habitat_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_sensors.md" title="habitat_sensors" class="md-nav__link">
      habitat_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_environment.md" title="habitat_environment" class="md-nav__link">
      habitat_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_preprocessors.md" title="habitat_preprocessors" class="md-nav__link">
      habitat_preprocessors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_task_samplers.md" title="habitat_task_samplers" class="md-nav__link">
      habitat_task_samplers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-1-7" type="checkbox" id="nav-10-3-1-7">
    
    <label class="md-nav__link" for="nav-10-3-1-7">
      scripts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-3-1-7">
        scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/scripts/agent_demo.md" title="agent_demo" class="md-nav__link">
      agent_demo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/scripts/make_map.md" title="make_map" class="md-nav__link">
      make_map
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/habitat_plugin/habitat_utils.md" title="habitat_utils" class="md-nav__link">
      habitat_utils
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-2" type="checkbox" id="nav-10-3-2">
    
    <label class="md-nav__link" for="nav-10-3-2">
      lighthouse_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-2">
        lighthouse_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_models.md" title="lighthouse_models" class="md-nav__link">
      lighthouse_models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_environment.md" title="lighthouse_environment" class="md-nav__link">
      lighthouse_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_tasks.md" title="lighthouse_tasks" class="md-nav__link">
      lighthouse_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_sensors.md" title="lighthouse_sensors" class="md-nav__link">
      lighthouse_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/lighthouse_plugin/lighthouse_util.md" title="lighthouse_util" class="md-nav__link">
      lighthouse_util
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-3" type="checkbox" id="nav-10-3-3">
    
    <label class="md-nav__link" for="nav-10-3-3">
      babyai_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-3">
        babyai_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/babyai_constants.md" title="babyai_constants" class="md-nav__link">
      babyai_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/babyai_models.md" title="babyai_models" class="md-nav__link">
      babyai_models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-3-3" type="checkbox" id="nav-10-3-3-3">
    
    <label class="md-nav__link" for="nav-10-3-3-3">
      scripts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-3-3-3">
        scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/scripts/truncate_expert_demos.md" title="truncate_expert_demos" class="md-nav__link">
      truncate_expert_demos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/scripts/get_instr_length_percentiles.md" title="get_instr_length_percentiles" class="md-nav__link">
      get_instr_length_percentiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/scripts/download_babyai_expert_demos.md" title="download_babyai_expert_demos" class="md-nav__link">
      download_babyai_expert_demos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/babyai_plugin/babyai_tasks.md" title="babyai_tasks" class="md-nav__link">
      babyai_tasks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-4" type="checkbox" id="nav-10-3-4">
    
    <label class="md-nav__link" for="nav-10-3-4">
      ithor_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-4">
        ithor_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_tasks.md" title="ithor_tasks" class="md-nav__link">
      ithor_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_environment.md" title="ithor_environment" class="md-nav__link">
      ithor_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_constants.md" title="ithor_constants" class="md-nav__link">
      ithor_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_util.md" title="ithor_util" class="md-nav__link">
      ithor_util
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_sensors.md" title="ithor_sensors" class="md-nav__link">
      ithor_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/ithor_plugin/ithor_task_samplers.md" title="ithor_task_samplers" class="md-nav__link">
      ithor_task_samplers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-5" type="checkbox" id="nav-10-3-5">
    
    <label class="md-nav__link" for="nav-10-3-5">
      robothor_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-5">
        robothor_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_preprocessors.md" title="robothor_preprocessors" class="md-nav__link">
      robothor_preprocessors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_task_samplers.md" title="robothor_task_samplers" class="md-nav__link">
      robothor_task_samplers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_environment.md" title="robothor_environment" class="md-nav__link">
      robothor_environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_constants.md" title="robothor_constants" class="md-nav__link">
      robothor_constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_models.md" title="robothor_models" class="md-nav__link">
      robothor_models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_tasks.md" title="robothor_tasks" class="md-nav__link">
      robothor_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_sensors.md" title="robothor_sensors" class="md-nav__link">
      robothor_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/robothor_plugin/robothor_viz.md" title="robothor_viz" class="md-nav__link">
      robothor_viz
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-3-6" type="checkbox" id="nav-10-3-6">
    
    <label class="md-nav__link" for="nav-10-3-6">
      minigrid_plugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-3-6">
        minigrid_plugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_tasks.md" title="minigrid_tasks" class="md-nav__link">
      minigrid_tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_environments.md" title="minigrid_environments" class="md-nav__link">
      minigrid_environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_sensors.md" title="minigrid_sensors" class="md-nav__link">
      minigrid_sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/plugins/minigrid_plugin/minigrid_models.md" title="minigrid_models" class="md-nav__link">
      minigrid_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4" type="checkbox" id="nav-10-4">
    
    <label class="md-nav__link" for="nav-10-4">
      projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-4">
        projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1" type="checkbox" id="nav-10-4-1">
    
    <label class="md-nav__link" for="nav-10-4-1">
      objectnav_baselines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-1">
        objectnav_baselines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-1" type="checkbox" id="nav-10-4-1-1">
    
    <label class="md-nav__link" for="nav-10-4-1-1">
      experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-1-1">
        experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-1-1" type="checkbox" id="nav-10-4-1-1-1">
    
    <label class="md-nav__link" for="nav-10-4-1-1-1">
      robothor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-1-1-1">
        robothor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_base.md" title="objectnav_robothor_base" class="md-nav__link">
      objectnav_robothor_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_rgb_resnetgru_ddppo.md" title="objectnav_robothor_rgb_resnetgru_ddppo" class="md-nav__link">
      objectnav_robothor_rgb_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_rgbd_resnetgru_ddppo.md" title="objectnav_robothor_rgbd_resnetgru_ddppo" class="md-nav__link">
      objectnav_robothor_rgbd_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/robothor/objectnav_robothor_depth_resnetgru_ddppo.md" title="objectnav_robothor_depth_resnetgru_ddppo" class="md-nav__link">
      objectnav_robothor_depth_resnetgru_ddppo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-1-2" type="checkbox" id="nav-10-4-1-1-2">
    
    <label class="md-nav__link" for="nav-10-4-1-1-2">
      ithor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-1-1-2">
        ithor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_rgbd_resnetgru_ddppo.md" title="objectnav_ithor_rgbd_resnetgru_ddppo" class="md-nav__link">
      objectnav_ithor_rgbd_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_depth_resnetgru_ddppo.md" title="objectnav_ithor_depth_resnetgru_ddppo" class="md-nav__link">
      objectnav_ithor_depth_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_rgb_resnetgru_ddppo.md" title="objectnav_ithor_rgb_resnetgru_ddppo" class="md-nav__link">
      objectnav_ithor_rgb_resnetgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/ithor/objectnav_ithor_base.md" title="objectnav_ithor_base" class="md-nav__link">
      objectnav_ithor_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/experiments/objectnav_base.md" title="objectnav_base" class="md-nav__link">
      objectnav_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-1-2" type="checkbox" id="nav-10-4-1-2">
    
    <label class="md-nav__link" for="nav-10-4-1-2">
      models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-1-2">
        models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/objectnav_baselines/models/object_nav_models.md" title="object_nav_models" class="md-nav__link">
      object_nav_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2" type="checkbox" id="nav-10-4-2">
    
    <label class="md-nav__link" for="nav-10-4-2">
      babyai_baselines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-2">
        babyai_baselines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2-1" type="checkbox" id="nav-10-4-2-1">
    
    <label class="md-nav__link" for="nav-10-4-2-1">
      experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-2-1">
        experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2-1-1" type="checkbox" id="nav-10-4-2-1-1">
    
    <label class="md-nav__link" for="nav-10-4-2-1-1">
      go_to_local
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-2-1-1">
        go_to_local
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/bc.md" title="bc" class="md-nav__link">
      bc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/dagger.md" title="dagger" class="md-nav__link">
      dagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/bc_teacher_forcing.md" title="bc_teacher_forcing" class="md-nav__link">
      bc_teacher_forcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/ppo.md" title="ppo" class="md-nav__link">
      ppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/a2c.md" title="a2c" class="md-nav__link">
      a2c
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_local/base.md" title="base" class="md-nav__link">
      base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-2-1-2" type="checkbox" id="nav-10-4-2-1-2">
    
    <label class="md-nav__link" for="nav-10-4-2-1-2">
      go_to_obj
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-2-1-2">
        go_to_obj
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/bc.md" title="bc" class="md-nav__link">
      bc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/dagger.md" title="dagger" class="md-nav__link">
      dagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/bc_teacher_forcing.md" title="bc_teacher_forcing" class="md-nav__link">
      bc_teacher_forcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/ppo.md" title="ppo" class="md-nav__link">
      ppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/a2c.md" title="a2c" class="md-nav__link">
      a2c
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/go_to_obj/base.md" title="base" class="md-nav__link">
      base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/babyai_baselines/experiments/base.md" title="base" class="md-nav__link">
      base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3" type="checkbox" id="nav-10-4-3">
    
    <label class="md-nav__link" for="nav-10-4-3">
      pointnav_baselines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-3">
        pointnav_baselines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1" type="checkbox" id="nav-10-4-3-1">
    
    <label class="md-nav__link" for="nav-10-4-3-1">
      experiments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-3-1">
        experiments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1-1" type="checkbox" id="nav-10-4-3-1-1">
    
    <label class="md-nav__link" for="nav-10-4-3-1-1">
      robothor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-3-1-1">
        robothor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_rgbd_simpleconvgru_ddppo.md" title="pointnav_robothor_rgbd_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_robothor_rgbd_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_depth_simpleconvgru_ddppo.md" title="pointnav_robothor_depth_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_robothor_depth_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_rgb_simpleconvgru_ddppo.md" title="pointnav_robothor_rgb_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_robothor_rgb_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/robothor/pointnav_robothor_base.md" title="pointnav_robothor_base" class="md-nav__link">
      pointnav_robothor_base
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1-2" type="checkbox" id="nav-10-4-3-1-2">
    
    <label class="md-nav__link" for="nav-10-4-3-1-2">
      habitat
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-3-1-2">
        habitat
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/habitat/pointnav_habitat_rgb_simpleconvgru_ddppo.md" title="pointnav_habitat_rgb_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_habitat_rgb_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/habitat/pointnav_habitat_rgbd_simpleconvgru_ddppo.md" title="pointnav_habitat_rgbd_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_habitat_rgbd_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/habitat/pointnav_habitat_base.md" title="pointnav_habitat_base" class="md-nav__link">
      pointnav_habitat_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/habitat/pointnav_habitat_depth_simpleconvgru_ddppo.md" title="pointnav_habitat_depth_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_habitat_depth_simpleconvgru_ddppo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/pointnav_base.md" title="pointnav_base" class="md-nav__link">
      pointnav_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-1-4" type="checkbox" id="nav-10-4-3-1-4">
    
    <label class="md-nav__link" for="nav-10-4-3-1-4">
      ithor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-10-4-3-1-4">
        ithor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_rgbd_simpleconvgru_ddppo.md" title="pointnav_ithor_rgbd_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_ithor_rgbd_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_rgb_simpleconvgru_ddppo.md" title="pointnav_ithor_rgb_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_ithor_rgb_simpleconvgru_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_base.md" title="pointnav_ithor_base" class="md-nav__link">
      pointnav_ithor_base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/experiments/ithor/pointnav_ithor_depth_simpleconvgru_ddppo.md" title="pointnav_ithor_depth_simpleconvgru_ddppo" class="md-nav__link">
      pointnav_ithor_depth_simpleconvgru_ddppo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-3-2" type="checkbox" id="nav-10-4-3-2">
    
    <label class="md-nav__link" for="nav-10-4-3-2">
      models
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-10-4-3-2">
        models
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/pointnav_baselines/models/point_nav_models.md" title="point_nav_models" class="md-nav__link">
      point_nav_models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-4-4" type="checkbox" id="nav-10-4-4">
    
    <label class="md-nav__link" for="nav-10-4-4">
      tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-4-4">
        tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/pointnav_habitat_rgb_ddppo.md" title="pointnav_habitat_rgb_ddppo" class="md-nav__link">
      pointnav_habitat_rgb_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/pointnav_robothor_rgb_ddppo.md" title="pointnav_robothor_rgb_ddppo" class="md-nav__link">
      pointnav_robothor_rgb_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/pointnav_ithor_rgb_ddppo.md" title="pointnav_ithor_rgb_ddppo" class="md-nav__link">
      pointnav_ithor_rgb_ddppo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/projects/tutorials/minigrid_tutorial.md" title="minigrid_tutorial" class="md-nav__link">
      minigrid_tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5" type="checkbox" id="nav-10-5">
    
    <label class="md-nav__link" for="nav-10-5">
      tests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-5">
        tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5-1" type="checkbox" id="nav-10-5-1">
    
    <label class="md-nav__link" for="nav-10-5-1">
      multiprocessing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-5-1">
        multiprocessing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/tests/multiprocessing/test_frozen_attribs.md" title="test_frozen_attribs" class="md-nav__link">
      test_frozen_attribs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5-2" type="checkbox" id="nav-10-5-2">
    
    <label class="md-nav__link" for="nav-10-5-2">
      sync_algs_cpu
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-10-5-2">
        sync_algs_cpu
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/tests/sync_algs_cpu/test_to_to_obj_trains.md" title="test_to_to_obj_trains" class="md-nav__link">
      test_to_to_obj_trains
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-6" type="checkbox" id="nav-10-6">
    
    <label class="md-nav__link" for="nav-10-6">
      utils
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-6">
        utils
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/model_utils.md" title="model_utils" class="md-nav__link">
      model_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/experiment_utils.md" title="experiment_utils" class="md-nav__link">
      experiment_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/system.md" title="system" class="md-nav__link">
      system
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/cacheless_frcnn.md" title="cacheless_frcnn" class="md-nav__link">
      cacheless_frcnn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/misc_utils.md" title="misc_utils" class="md-nav__link">
      misc_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/viz_utils.md" title="viz_utils" class="md-nav__link">
      viz_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/tensor_utils.md" title="tensor_utils" class="md-nav__link">
      tensor_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/utils/cache_utils.md" title="cache_utils" class="md-nav__link">
      cache_utils
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#task" title="Task" class="md-nav__link">
    Task
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization-action-space-and-termination" title="Initialization, action space and termination" class="md-nav__link">
    Initialization, action space and termination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-method" title="Step method" class="md-nav__link">
    Step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-rendering-and-expert-actions" title="Metrics, rendering and expert actions" class="md-nav__link">
    Metrics, rendering and expert actions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasksampler" title="TaskSampler" class="md-nav__link">
    TaskSampler
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization-and-termination" title="Initialization and termination" class="md-nav__link">
    Initialization and termination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-sampling" title="Task sampling" class="md-nav__link">
    Task sampling
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/allenai/allenact/edit/master/docs/howtos/defining-a-new-task.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="defining-a-new-task">Defining a new task<a class="headerlink" href="#defining-a-new-task" title="Permanent link">#</a></h1>
<p>In order to use new tasks in our experiments, we need to define two classes:</p>
<ul>
<li>A <a href="/api/rl_base/task#task">Task</a>, including, among others, a <code>step</code> implementation providing a
<a href="/api/rl_base/common#rlstepresult">RLStepResult</a>, a <code>metrics</code> method providing quantitative performance measurements 
for agents and, optionally, a <code>query_expert</code> method that can be used e.g. with an
<a href="/api/onpolicy_sync/losses/imitation#imitation">imitation loss</a> during training.</li>
<li>A <a href="/api/rl_base/task#tasksampler">TaskSampler</a>, that allows instantiating new Tasks for the agents to solve during
training, validation and testing.</li>
</ul>
<h2 id="task">Task<a class="headerlink" href="#task" title="Permanent link">#</a></h2>
<p>Let's define a semantic navigation task, where agents have to navigate from a starting point in an environment to an
object of a specific class using a minimal amount of steps and deciding when the goal has been reached.</p>
<p>We need to define the methods <code>action_space</code>, <code>render</code>, <code>_step</code>, <code>reached_terminal_state</code>, <code>class_action_names</code>, <code>close</code>,
<code>metrics</code>, and <code>query_expert</code> from the base <code>Task</code> definition.</p>
<h3 id="initialization-action-space-and-termination">Initialization, action space and termination<a class="headerlink" href="#initialization-action-space-and-termination" title="Permanent link">#</a></h3>
<p>Let's start with the definition of the action space and task initialization:</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ObjectNavTask</span><span class="p">(</span><span class="n">Task</span><span class="p">[</span><span class="n">IThorEnvironment</span><span class="p">]):</span>
    <span class="n">_actions</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;MOVE_AHEAD&#39;</span><span class="p">,</span> <span class="s1">&#39;ROTATE_LEFT&#39;</span><span class="p">,</span> <span class="s1">&#39;ROTATE_RIGHT&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOOK_DOWN&#39;</span><span class="p">,</span> <span class="s1">&#39;LOOK_UP&#39;</span><span class="p">,</span> <span class="s1">&#39;END&#39;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">env</span><span class="p">:</span> <span class="n">IThorEnvironment</span><span class="p">,</span>
        <span class="n">sensors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Sensor</span><span class="p">],</span>
        <span class="n">task_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">max_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
            <span class="n">sensors</span><span class="o">=</span><span class="n">sensors</span><span class="p">,</span>
            <span class="n">task_info</span><span class="o">=</span><span class="n">task_info</span><span class="p">,</span>
            <span class="n">max_steps</span><span class="o">=</span><span class="n">max_steps</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_took_end_action</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_success</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">action_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">gym</span><span class="o">.</span><span class="n">spaces</span><span class="o">.</span><span class="n">Discrete</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">class_action_names</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_actions</span>
        <span class="k">def</span> <span class="nf">reached_terminal_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_took_end_action</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="o">...</span>
</pre></div>


<h3 id="step-method">Step method<a class="headerlink" href="#step-method" title="Permanent link">#</a></h3>
<p>Next, we define the main method <code>_step</code> that will be called every time the agent produces a new action: </p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ObjectNavTask</span><span class="p">(</span><span class="n">Task</span><span class="p">[</span><span class="n">IThorEnvironment</span><span class="p">]):</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RLStepResult</span><span class="p">:</span>
        <span class="n">action_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">class_action_names</span><span class="p">()[</span><span class="n">action</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">action_str</span> <span class="o">==</span> <span class="s1">&#39;END&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_took_end_action</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_goal_object_visible</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_action_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_success</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">({</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="n">action_str</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_action_success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">last_action_success</span>

        <span class="n">step_result</span> <span class="o">=</span> <span class="n">RLStepResult</span><span class="p">(</span>
            <span class="n">observation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_observations</span><span class="p">(),</span>
            <span class="n">reward</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">judge</span><span class="p">(),</span>
            <span class="n">done</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">is_done</span><span class="p">(),</span>
            <span class="n">info</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;last_action_success&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_action_success</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">step_result</span>

    <span class="k">def</span> <span class="nf">_is_goal_object_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span>
            <span class="n">o</span><span class="p">[</span><span class="s2">&quot;objectType&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_info</span><span class="p">[</span><span class="s2">&quot;object_type&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">visible_objects</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">judge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_action_success</span><span class="p">:</span>
            <span class="n">reward</span> <span class="o">+=</span> <span class="o">-</span><span class="mf">0.03</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_took_end_action</span><span class="p">:</span>
            <span class="n">reward</span> <span class="o">+=</span> <span class="mf">1.0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_success</span> <span class="k">else</span> <span class="o">-</span><span class="mf">1.0</span>

        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">reward</span><span class="p">)</span>
</pre></div>


<h3 id="metrics-rendering-and-expert-actions">Metrics, rendering and expert actions<a class="headerlink" href="#metrics-rendering-and-expert-actions" title="Permanent link">#</a></h3>
<p>Finally, we define methods to render and evaluate the current task, and optionally generate expert actions to be used
e.g. for DAgger training.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;only rgb rendering is implemented&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">current_frame</span>


    <span class="k">def</span> <span class="nf">metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_done</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_success</span><span class="p">,</span> <span class="s2">&quot;ep_length&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_steps_taken</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">query_expert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">my_objnav_expert_implementation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>


<h2 id="tasksampler">TaskSampler<a class="headerlink" href="#tasksampler" title="Permanent link">#</a></h2>
<p>We also need to define the corresponding TaskSampler, which must contain implementations for methods <code>__len__</code>,
<code>total_unique</code>, <code>last_sampled_task</code>, <code>next_task</code>, <code>close</code>, <code>reset</code>, and <code>set_seed</code>. Currently,
an additional method <code>all_observation_spaces_equal</code> is used to ensure compatibility with the current
<a href="/api/onpolicy_sync/storage#rolloutstorage">RolloutStorage</a>.</p>
<p>Let's define a tasks sampler able to provide an infinite number of object navigation tasks for AI2-THOR.</p>
<h3 id="initialization-and-termination">Initialization and termination<a class="headerlink" href="#initialization-and-termination" title="Permanent link">#</a></h3>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ObjectNavTaskSampler</span><span class="p">(</span><span class="n">TaskSampler</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">scenes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">object_types</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">sensors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Sensor</span><span class="p">],</span>
        <span class="n">max_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">env_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">action_space</span><span class="p">:</span> <span class="n">gym</span><span class="o">.</span><span class="n">Space</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">deterministic_cudnn</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env_args</span> <span class="o">=</span> <span class="n">env_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenes</span> <span class="o">=</span> <span class="n">scenes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_types</span> <span class="o">=</span> <span class="n">object_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_size</span> <span class="o">=</span> <span class="mf">0.25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">IThorEnvironment</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sensors</span> <span class="o">=</span> <span class="n">sensors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_steps</span> <span class="o">=</span> <span class="n">max_steps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_action_sapce</span> <span class="o">=</span> <span class="n">action_space</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scene_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_last_sampled_task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ObjectNavTask</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">set_seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene_id</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_create_environment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">IThorEnvironment</span><span class="p">:</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">IThorEnvironment</span><span class="p">(</span>
            <span class="n">make_agents_visible</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">object_open_speed</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
            <span class="n">restrict_to_initially_reachable_points</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">env_args</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">env</span>
</pre></div>


<h3 id="task-sampling">Task sampling<a class="headerlink" href="#task-sampling" title="Permanent link">#</a></h3>
<p>Finally, we need to define methods to determine the number of available tasks (possibly infinite) and sample tasks:</p>
<div class="codehilite"><pre><span></span>    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">last_sampled_task</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ObjectNavTask</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_sampled_task</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_observation_spaces_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">next_task</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ObjectNavTask</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">scene_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">scene</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">scene_name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_environment</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">scene_name</span><span class="o">=</span><span class="n">scene</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">randomize_agent_location</span><span class="p">()</span>

        <span class="n">object_types_in_scene</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="p">[</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;objectType&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">last_event</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]]</span>
        <span class="p">)</span>

        <span class="n">task_info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;object_type&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_types</span><span class="p">,</span> <span class="mi">1</span><span class="p">)}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_last_sampled_task</span> <span class="o">=</span> <span class="n">ObjectNavTask</span><span class="p">(</span>
            <span class="n">env</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">,</span>
            <span class="n">sensors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sensors</span><span class="p">,</span>
            <span class="n">task_info</span><span class="o">=</span><span class="n">task_info</span><span class="p">,</span>
            <span class="n">max_steps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_steps</span><span class="p">,</span>
            <span class="n">action_space</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_action_sapce</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_sampled_task</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../defining-a-new-model/" title="Define a new model" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Define a new model
              </span>
            </div>
          </a>
        
        
          <a href="../defining-a-new-training-pipeline/" title="Define a new training pipeline" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Define a new training pipeline
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.2ba8dec4.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>